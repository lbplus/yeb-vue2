{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\yeb3\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\yeb3\\src\\utils\\download.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\yeb3\\src\\utils\\download.js","mtime":1637151113068},{"path":"C:\\Users\\Administrator\\Desktop\\yeb3\\babel.config.js","mtime":1636369865443},{"path":"C:\\Users\\Administrator\\Desktop\\yeb3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yeb3\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcicKfSk7CnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuU3RyJyk7CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coZXJyb3IpOwp9KTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwKSB7CiAgdmFyIGhlYWRlcnMgPSByZXNwLmhlYWRlcnM7CiAgdmFyIHJlZyA9IFJlZ0V4cCgvYXBwbGljYXRpb25cL2pzb24vKTsKCiAgaWYgKGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddLm1hdGNoKHJlZykpIHsKICAgIHJlc3AuZGF0YSA9IHVuaXRUb1N0cmluZyhyZXNwLmRhdGEpOwogIH0gZWxzZSB7CiAgICB2YXIgZmlsZURvd25sb2FkID0gcmVxdWlyZSgnanMtZmlsZS1kb3dubG9hZCcpOyAvL+W8lei/m+adpeeahGZpbGVkb3dubG9hZOaPkuS7tgoKCiAgICB2YXIgZmlsZU5hbWUgPSBoZWFkZXJzWydjb250ZW50LWRpc3Bvc2l0aW9uJ10uc3BsaXQoJzsnKVsxXS5zcGxpdCgnZmlsZW5hbWU9JylbMV07IC8v5paH5Lu25ZCNCgogICAgdmFyIGNvbnRlbnRUeXBlID0gaGVhZGVyc1snY29udGVudC10eXBlJ107IC8vIOWTjeW6lOexu+WeiwoKICAgIGZpbGVOYW1lID0gZGVjb2RlVVJJQ29tcG9uZW50KGZpbGVOYW1lKTsgLy/mlofku7blkI3moLzlvI/ov5vooYzovazmjaIs6Ziy5q2i5Lit5paH5Lmx56CBCgogICAgZmlsZURvd25sb2FkKHJlc3AuZGF0YSwgZmlsZU5hbWUsIGNvbnRlbnRUeXBlKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKGVycm9yKTsKfSk7CgpmdW5jdGlvbiB1bml0VG9TdHJpbmcodW5pdEFycmF5KSB7CiAgdmFyIGVuY29kZVN0cmluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkodW5pdEFycmF5KSk7CiAgdmFyIGRlY29kZVN0cmluZyA9IGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZW5jb2RlU3RyaW5nKSk7CiAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlU3RyaW5nKTsKfQoKdmFyIGJhc2UgPSAnJzsKZXhwb3J0IHZhciBkb3dubG9hZFJlcXVlc3QgPSBmdW5jdGlvbiBkb3dubG9hZFJlcXVlc3QodXJsLCBwYXJhbXMpIHsKICByZXR1cm4gc2VydmljZSh7CiAgICBtZXRob2Q6ICdnZXQnLAogICAgdXJsOiAiIi5jb25jYXQoYmFzZSkuY29uY2F0KHVybCksCiAgICBkYXRhOiBwYXJhbXMKICB9KTsKfTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["C:/Users/Administrator/Desktop/yeb3/src/utils/download.js"],"names":["axios","service","create","responseType","interceptors","request","use","config","headers","window","sessionStorage","getItem","error","console","log","response","resp","reg","RegExp","match","data","unitToString","fileDownload","require","fileName","split","contentType","decodeURIComponent","unitArray","encodeString","String","fromCharCode","apply","Uint8Array","decodeString","escape","JSON","parse","base","downloadRequest","url","params","method"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,OAAO,GAAGD,KAAK,CAACE,MAAN,CAAa;AACzBC,EAAAA,YAAY,EAAE;AADW,CAAb,CAAhB;AAIAF,OAAO,CAACG,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACvCA,EAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkCC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,UAA9B,CAAlC;AACA,SAAOJ,MAAP;AACH,CAHD,EAGG,UAAAK,KAAK,EAAI;AACRC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,CALD;AAQAX,OAAO,CAACG,YAAR,CAAqBW,QAArB,CAA8BT,GAA9B,CAAkC,UAAAU,IAAI,EAAI;AAClC,MAAMR,OAAO,GAAGQ,IAAI,CAACR,OAArB;AACA,MAAIS,GAAG,GAAGC,MAAM,CAAC,mBAAD,CAAhB;;AACA,MAAIV,OAAO,CAAC,cAAD,CAAP,CAAwBW,KAAxB,CAA8BF,GAA9B,CAAJ,EAAwC;AACpCD,IAAAA,IAAI,CAACI,IAAL,GAAYC,YAAY,CAACL,IAAI,CAACI,IAAN,CAAxB;AACH,GAFD,MAEO;AACH,QAAIE,YAAY,GAAGC,OAAO,CAAC,kBAAD,CAA1B,CADG,CAC6C;;;AAChD,QAAIC,QAAQ,GAAGhB,OAAO,CAAC,qBAAD,CAAP,CAA+BiB,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,EAA6CA,KAA7C,CAAmD,WAAnD,EAAgE,CAAhE,CAAf,CAFG,CAEgF;;AACnF,QAAIC,WAAW,GAAGlB,OAAO,CAAC,cAAD,CAAzB,CAHG,CAGwC;;AAC3CgB,IAAAA,QAAQ,GAAGG,kBAAkB,CAACH,QAAD,CAA7B,CAJG,CAIsC;;AACzCF,IAAAA,YAAY,CAACN,IAAI,CAACI,IAAN,EAAYI,QAAZ,EAAsBE,WAAtB,CAAZ;AACH;AACJ,CAZL,EAaI,UAAAd,KAAK,EAAI;AACLC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,CAfL;;AAiBA,SAASS,YAAT,CAAsBO,SAAtB,EAAiC;AAC7B,MAAIC,YAAY,GAAGC,MAAM,CAACC,YAAP,CAAoBC,KAApB,CAA0B,IAA1B,EAAgC,IAAIC,UAAJ,CAAeL,SAAf,CAAhC,CAAnB;AACA,MAAIM,YAAY,GAAGP,kBAAkB,CAACQ,MAAM,CAACN,YAAD,CAAP,CAArC;AACA,SAAOO,IAAI,CAACC,KAAL,CAAWH,YAAX,CAAP;AACH;;AAED,IAAII,IAAI,GAAG,EAAX;AAEA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,GAAD,EAAMC,MAAN,EAAiB;AAC5C,SAAOxC,OAAO,CAAC;AACXyC,IAAAA,MAAM,EAAE,KADG;AAEXF,IAAAA,GAAG,YAAKF,IAAL,SAAYE,GAAZ,CAFQ;AAGXpB,IAAAA,IAAI,EAAEqB;AAHK,GAAD,CAAd;AAKH,CANM;AASP,eAAexC,OAAf","sourcesContent":["import axios from 'axios'\r\n\r\nconst service = axios.create({\r\n    responseType: 'arraybuffer'\r\n})\r\n\r\nservice.interceptors.request.use(config => {\r\n    config.headers['Authorization'] = window.sessionStorage.getItem('tokenStr');\r\n    return config;\r\n}, error => {\r\n    console.log(error);\r\n})\r\n\r\n\r\nservice.interceptors.response.use(resp => {\r\n        const headers = resp.headers;\r\n        let reg = RegExp(/application\\/json/);\r\n        if (headers['content-type'].match(reg)) {\r\n            resp.data = unitToString(resp.data);\r\n        } else {\r\n            let fileDownload = require('js-file-download'); //引进来的filedownload插件\r\n            let fileName = headers['content-disposition'].split(';')[1].split('filename=')[1]; //文件名\r\n            let contentType = headers['content-type']; // 响应类型\r\n            fileName = decodeURIComponent(fileName); //文件名格式进行转换,防止中文乱码\r\n            fileDownload(resp.data, fileName, contentType);\r\n        }\r\n    },\r\n    error => {\r\n        console.log(error);\r\n    })\r\n\r\nfunction unitToString(unitArray) {\r\n    let encodeString = String.fromCharCode.apply(null, new Uint8Array(unitArray));\r\n    let decodeString = decodeURIComponent(escape(encodeString));\r\n    return JSON.parse(decodeString)\r\n}\r\n\r\nlet base = '';\r\n\r\nexport const downloadRequest = (url, params) => {\r\n    return service({\r\n        method: 'get',\r\n        url: `${base}${url}`,\r\n        data: params\r\n    })\r\n}\r\n\r\n\r\nexport default service"]}]}