{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\yeb2\\src\\utils\\menus.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\src\\utils\\menus.js","mtime":1669882888757},{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\babel.config.js","mtime":1636369865443},{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC95ZWIyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgeyBnZXRSZXF1ZXN0IH0gZnJvbSAiLi9hcGkiOwpleHBvcnQgdmFyIGluaXRNZW51ID0gZnVuY3Rpb24gaW5pdE1lbnUocm91dGVyLCBzdG9yZSkgewogIGlmIChzdG9yZS5zdGF0ZS5yb3V0ZXMubGVuZ3RoID4gMCkgewogICAgcmV0dXJuOwogIH0KCiAgZ2V0UmVxdWVzdCgiL3N5c3RlbS9jb25maWcvbWVudSIpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgIGlmIChkYXRhKSB7CiAgICAgIC8vICDmoLzlvI/ljJZSb3V0ZXIKICAgICAgdmFyIGZtdFJvdXRlcyA9IGZvcm1hdFJvdXRlcyhkYXRhKTsgLy8g5re75Yqg5Yiw6Lev55SxCgogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZm10Um91dGVzKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIHggPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZSh4KTsKICAgICAgICB9IC8v5bCG5pWw5o2u5a2Y5YWldnVleAoKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICBzdG9yZS5jb21taXQoJ2luaXRSb3V0ZXMnLCBmbXRSb3V0ZXMpOwogICAgICBzdG9yZS5kaXNwYXRjaCgnY29ubmVjdCcpOwogICAgfQogIH0pOwp9OyAvLyAgcm91dGVz5piv5LuO5ZCO56uv5o6l5pS26L+H5p2l55qEZGF0YeaVsOaNrgoKZXhwb3J0IHZhciBmb3JtYXRSb3V0ZXMgPSBmdW5jdGlvbiBmb3JtYXRSb3V0ZXMocm91dGVzKSB7CiAgdmFyIGZtdFJvdXRlcyA9IFtdOwogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICB2YXIgcGF0aCA9IGl0ZW0ucGF0aCwKICAgICAgICBfY29tcG9uZW50ID0gaXRlbS5jb21wb25lbnQsCiAgICAgICAgbmFtZSA9IGl0ZW0ubmFtZSwKICAgICAgICBpY29uQ2xzID0gaXRlbS5pY29uQ2xzLAogICAgICAgIGNoaWxkcmVuID0gaXRlbS5jaGlsZHJlbjsKCiAgICBpZiAoY2hpbGRyZW4gJiYgY2hpbGRyZW4gaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAvLyDpgJLlvZIKICAgICAgY2hpbGRyZW4gPSBmb3JtYXRSb3V0ZXMoY2hpbGRyZW4pOwogICAgfQoKICAgIHZhciBmbVJvdXRlciA9IHsKICAgICAgcGF0aDogcGF0aCwKICAgICAgbmFtZTogbmFtZSwKICAgICAgaWNvbkNsczogaWNvbkNscywKICAgICAgY2hpbGRyZW46IGNoaWxkcmVuLAogICAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudChyZXNvbHZlKSB7CiAgICAgICAgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnSG9tZScpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3MvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnRW1wJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9lbXAvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnUGVyJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9wZXIvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnU2FsJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9zYWwvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnU3RhJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9zdGEvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnU3lzJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9zeXMvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBmbXRSb3V0ZXMucHVzaChmbVJvdXRlcik7CiAgfSk7CiAgcmV0dXJuIGZtdFJvdXRlczsKfTs="},{"version":3,"sources":["C:/Users/Administrator/Desktop/yeb2/src/utils/menus.js"],"names":["getRequest","initMenu","router","store","state","routes","length","then","data","fmtRoutes","formatRoutes","x","addRoute","commit","dispatch","forEach","item","path","component","name","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"mappings":"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","sourcesContent":["import { getRequest } from \"./api\";\r\n\r\nexport const initMenu = (router, store) => {\r\n    if (store.state.routes.length > 0) {\r\n        return;\r\n    }\r\n    getRequest(\"/system/config/menu\").then(data => {\r\n        if (data) {\r\n            //  格式化Router\r\n            let fmtRoutes = formatRoutes(data);\r\n            // 添加到路由\r\n            for (let x of fmtRoutes) {\r\n                router.addRoute(x)\r\n            }\r\n            //将数据存入vuex\r\n            store.commit('initRoutes', fmtRoutes);\r\n            store.dispatch('connect');\r\n        }\r\n    })\r\n}\r\n\r\n//  routes是从后端接收过来的data数据\r\nexport const formatRoutes = (routes) => {\r\n    let fmtRoutes = [];\r\n    routes.forEach(item => {\r\n        let {\r\n            path,\r\n            component,\r\n            name,\r\n            iconCls,\r\n            children\r\n        } = item;\r\n        if (children && children instanceof Array) {\r\n            // 递归\r\n            children = formatRoutes(children);\r\n        }\r\n        let fmRouter = {\r\n            path: path,\r\n            name: name,\r\n            iconCls: iconCls,\r\n            children: children,\r\n            component(resolve) {\r\n                if (component.startsWith('Home')) {\r\n                    require(['../views/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith('Emp')) {\r\n                    require(['../views/emp/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith('Per')) {\r\n                    require(['../views/per/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith('Sal')) {\r\n                    require(['../views/sal/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith('Sta')) {\r\n                    require(['../views/sta/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith('Sys')) {\r\n                    require(['../views/sys/' + component + '.vue'], resolve);\r\n                }\r\n            }\r\n        }\r\n        fmtRoutes.push(fmRouter)\r\n    });\r\n    return fmtRoutes;\r\n}"]}]}