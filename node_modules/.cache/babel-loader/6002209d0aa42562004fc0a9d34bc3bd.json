{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\yeb2\\src\\views\\sys\\SysAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\src\\views\\sys\\SysAdmin.vue","mtime":1636877722577},{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\babel.config.js","mtime":1636369865443},{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yeb2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlN5c0FkbWluIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWRtaW5zOiBbXSwKICAgICAga2V5d29yZHM6ICIiLAogICAgICBhbGxSb2xlczogW10sCiAgICAgIHNlbGVjdFJvbGVzOiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRBZG1pbnMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhpZGVQb3A6IGZ1bmN0aW9uIGhpZGVQb3AoYWRtaW4pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciByb2xlcyA9IFtdOwogICAgICBPYmplY3QuYXNzaWduKHJvbGVzLCBhZG1pbi5yb2xlcyk7CiAgICAgIHZhciBmbGFnID0gZmFsc2U7CgogICAgICBpZiAocm9sZXMubGVuZ3RoICE9IHRoaXMuc2VsZWN0Um9sZXMubGVuZ3RoKSB7CiAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb2xlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHJvbGUgPSByb2xlc1tpXTsKCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuc2VsZWN0Um9sZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgdmFyIHNyID0gdGhpcy5zZWxlY3RSb2xlc1tqXTsKCiAgICAgICAgICAgIGlmIChyb2xlLmlkID09IHNyKSB7CiAgICAgICAgICAgICAgcm9sZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHJvbGVzLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChmbGFnKSB7CiAgICAgICAgdmFyIHVybCA9ICIvYWRtaW4vdXBkYXRlcm9sZT9hZG1pbklkPSIgKyBhZG1pbi5pZDsKICAgICAgICB0aGlzLnNlbGVjdFJvbGVzLmZvckVhY2goZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICB1cmwgKz0gIiZyaWRzPSIgKyByczsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnB1dFJlcXVlc3QodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgICBfdGhpcy5pbml0QWRtaW5zKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzaG93UG9wOiBmdW5jdGlvbiBzaG93UG9wKGFkbWluKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5pbml0QWxsUm9sZXMoKTsKICAgICAgdmFyIHJvbGVzID0gYWRtaW4ucm9sZXM7CiAgICAgIHRoaXMuc2VsZWN0Um9sZXMgPSBbXTsKICAgICAgcm9sZXMuZm9yRWFjaChmdW5jdGlvbiAocikgewogICAgICAgIF90aGlzMi5zZWxlY3RSb2xlcy5wdXNoKHIuaWQpOwogICAgICB9KTsKICAgIH0sCiAgICBpbml0QWxsUm9sZXM6IGZ1bmN0aW9uIGluaXRBbGxSb2xlcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmdldFJlcXVlc3QoIi9hZG1pbi9yb2xlcyIpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgX3RoaXMzLmFsbFJvbGVzID0gcmVzcDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGVuYWJsZWRDaGFuZ2U6IGZ1bmN0aW9uIGVuYWJsZWRDaGFuZ2UoYWRtaW4pIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnB1dFJlcXVlc3QoIi9hZG1pbi91cGRhdGUiLCBhZG1pbikudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICBfdGhpczQuaW5pdEFkbWlucygpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlQWRtaW46IGZ1bmN0aW9uIGRlbGV0ZUFkbWluKGFkbWluKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybSgi5q2k5pON5L2c5bCG5rC45LmF5Yig6ZmkIiArIGFkbWluLm5hbWUgKyAi55So5oi3LCDmmK/lkKbnu6fnu60/IiwgIuaPkOekuiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS5kZWxldGVSZXF1ZXN0KCIvYWRtaW4vZGVsZXRlIiArIGFkbWluLmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgICBfdGhpczUuaW5pdEFkbWlucygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgIG1lc3NhZ2U6ICLlt7Llj5bmtojliKDpmaQiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGRvU2VhcmNoOiBmdW5jdGlvbiBkb1NlYXJjaCgpIHsKICAgICAgdGhpcy5pbml0QWRtaW5zKCk7CiAgICB9LAogICAgaW5pdEFkbWluczogZnVuY3Rpb24gaW5pdEFkbWlucygpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLmdldFJlcXVlc3QoIi9hZG1pbi9saXN0Lz9rZXl3b3Jkcz0iICsgdGhpcy5rZXl3b3JkcykudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICBfdGhpczYuYWRtaW5zID0gcmVzcDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["SysAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,WAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,UAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,mBACA,KADA,EACA;AAAA;;AACA,UAAA,KAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,MAAA,CAAA,KAAA,EAAA,KAAA,CAAA,KAAA;AACA,UAAA,IAAA,GAAA,KAAA;;AACA,UAAA,KAAA,CAAA,MAAA,IAAA,KAAA,WAAA,CAAA,MAAA,EAAA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,IAAA,GAAA,KAAA,CAAA,CAAA,CAAA;;AACA,eAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,WAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,gBAAA,EAAA,GAAA,KAAA,WAAA,CAAA,CAAA,CAAA;;AACA,gBAAA,IAAA,CAAA,EAAA,IAAA,EAAA,EAAA;AACA,cAAA,KAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA;AACA,cAAA,CAAA;AACA;AACA;AACA;AACA;;AACA,YAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA;AACA;AACA;;AACA,UAAA,IAAA,EAAA;AACA,YAAA,GAAA,GAAA,+BAAA,KAAA,CAAA,EAAA;AACA,aAAA,WAAA,CAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,UAAA,GAAA,IAAA,WAAA,EAAA;AACA,SAFA;AAGA,aAAA,UAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,EAAA;AACA,YAAA,KAAA,CAAA,UAAA;AACA;AACA,SAJA;AAKA;AACA,KAlCA;AAmCA,IAAA,OAnCA,mBAmCA,KAnCA,EAmCA;AAAA;;AACA,WAAA,YAAA;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,KAAA;AACA,WAAA,WAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,QAAA,MAAA,CAAA,WAAA,CAAA,IAAA,CAAA,CAAA,CAAA,EAAA;AACA,OAFA;AAGA,KA1CA;AA2CA,IAAA,YA3CA,0BA2CA;AAAA;;AACA,WAAA,UAAA,CAAA,cAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA;AACA,OAJA;AAKA,KAjDA;AAkDA,IAAA,aAlDA,yBAkDA,KAlDA,EAkDA;AAAA;;AACA,WAAA,UAAA,CAAA,eAAA,EAAA,KAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,UAAA;AACA;AACA,OAJA;AAKA,KAxDA;AAyDA,IAAA,WAzDA,uBAyDA,KAzDA,EAyDA;AAAA;;AACA,WAAA,QAAA,CACA,aAAA,KAAA,CAAA,IAAA,GAAA,WADA,EAEA,IAFA,EAGA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAHA,EASA,IATA,CASA,YAAA;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,kBAAA,KAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,UAAA;AACA;AACA,SAJA;AAKA,OAfA,EAgBA,KAhBA,CAgBA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA;AACA,UAAA,IAAA,EAAA,MADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;AAIA,OArBA;AAsBA,KAhFA;AAkFA,IAAA,QAlFA,sBAkFA;AACA,WAAA,UAAA;AACA,KApFA;AAqFA,IAAA,UArFA,wBAqFA;AAAA;;AACA,WAAA,UAAA,CAAA,2BAAA,KAAA,QAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA;AACA,OAJA;AAKA;AA3FA;AAbA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"display: flex; justify-content: center; margin-top: 20px\">\r\n      <el-input\r\n        placeholder=\"通过用户名搜索用户\"\r\n        prefix-icon=\"el-icon-search\"\r\n        style=\"width: 400px; margin-right: 20px\"\r\n        v-model=\"keywords\"\r\n        @keydown.enter.native=\"doSearch\"\r\n      ></el-input>\r\n      <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"doSearch\"\r\n        >搜索</el-button\r\n      >\r\n    </div>\r\n    <div class=\"admin-container\">\r\n      <el-card class=\"admin-card\" v-for=\"(admin, index) in admins\" :key=\"index\">\r\n        <div slot=\"header\" class=\"clearfix\">\r\n          <span>{{ admin.name }}</span>\r\n          <el-button\r\n            style=\"float: right; padding: 3px 0; color: red\"\r\n            type=\"text\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"deleteAdmin(admin)\"\r\n          ></el-button>\r\n        </div>\r\n        <div>\r\n          <div class=\"img-content\">\r\n            <img\r\n              :src=\"admin.userFace\"\r\n              :alt=\"admin.name\"\r\n              :title=\"admin.name\"\r\n              class=\"userFace-img\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"userInfo\">\r\n          <div>姓名:{{ admin.name }}</div>\r\n          <div>手机号码:{{ admin.phone }}</div>\r\n          <div>电话号码:{{ admin.telephone }}</div>\r\n          <div>地址:{{ admin.address }}</div>\r\n          <div>\r\n            用户状态:\r\n            <el-switch\r\n              v-model=\"admin.enabled\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\"\r\n              active-text=\"启用\"\r\n              inactive-text=\"禁用\"\r\n              @change=\"enabledChange(admin)\"\r\n            >\r\n            </el-switch>\r\n          </div>\r\n          <div>\r\n            用户角色:\r\n            <el-tag\r\n              style=\"margin-right: 10px\"\r\n              type=\"success\"\r\n              v-for=\"(role, indexj) in admin.roles\"\r\n              :key=\"indexj\"\r\n              >{{ role.nameZh }}</el-tag\r\n            >\r\n            <el-popover\r\n              placement=\"right\"\r\n              title=\"角色列表\"\r\n              width=\"200\"\r\n              @show=\"showPop(admin)\"\r\n              @hide=\"hidePop(admin)\"\r\n              trigger=\"click\"\r\n            >\r\n              <el-select v-model=\"selectRoles\" multiple placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"(r, index) in allRoles\"\r\n                  :key=\"index\"\r\n                  :label=\"r.nameZh\"\r\n                  :value=\"r.id\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n              <el-button\r\n                slot=\"reference\"\r\n                type=\"text\"\r\n                icon=\"el-icon-more\"\r\n              ></el-button>\r\n            </el-popover>\r\n          </div>\r\n          <div>备注: {{ admin.remark }}</div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SysAdmin\",\r\n  data() {\r\n    return {\r\n      admins: [],\r\n      keywords: \"\",\r\n      allRoles: [],\r\n      selectRoles: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initAdmins();\r\n  },\r\n  methods: {\r\n    hidePop(admin) {\r\n      let roles = [];\r\n      Object.assign(roles, admin.roles);\r\n      let flag = false;\r\n      if (roles.length != this.selectRoles.length) {\r\n        flag = true;\r\n      } else {\r\n        for (let i = 0; i < roles.length; i++) {\r\n          let role = roles[i];\r\n          for (let j = 0; j < this.selectRoles.length; j++) {\r\n            let sr = this.selectRoles[j];\r\n            if (role.id == sr) {\r\n              roles.splice(i, 1);\r\n              i--;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (roles.length != 0) {\r\n          flag = true;\r\n        }\r\n      }\r\n      if (flag) {\r\n        let url = \"/admin/updaterole?adminId=\" + admin.id;\r\n        this.selectRoles.forEach((rs) => {\r\n          url += \"&rids=\" + rs;\r\n        });\r\n        this.putRequest(url).then((resp) => {\r\n          if (resp) {\r\n            this.initAdmins();\r\n          }\r\n        });\r\n      }\r\n    },\r\n    showPop(admin) {\r\n      this.initAllRoles();\r\n      let roles = admin.roles;\r\n      this.selectRoles = [];\r\n      roles.forEach((r) => {\r\n        this.selectRoles.push(r.id);\r\n      });\r\n    },\r\n    initAllRoles() {\r\n      this.getRequest(\"/admin/roles\").then((resp) => {\r\n        if (resp) {\r\n          this.allRoles = resp;\r\n        }\r\n      });\r\n    },\r\n    enabledChange(admin) {\r\n      this.putRequest(\"/admin/update\", admin).then((resp) => {\r\n        if (resp) {\r\n          this.initAdmins();\r\n        }\r\n      });\r\n    },\r\n    deleteAdmin(admin) {\r\n      this.$confirm(\r\n        \"此操作将永久删除\" + admin.name + \"用户, 是否继续?\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }\r\n      )\r\n        .then(() => {\r\n          this.deleteRequest(\"/admin/delete\" + admin.id).then((resp) => {\r\n            if (resp) {\r\n              this.initAdmins();\r\n            }\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\",\r\n          });\r\n        });\r\n    },\r\n\r\n    doSearch() {\r\n      this.initAdmins();\r\n    },\r\n    initAdmins() {\r\n      this.getRequest(\"/admin/list/?keywords=\" + this.keywords).then((resp) => {\r\n        if (resp) {\r\n          this.admins = resp;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.admin-card {\r\n  width: 350px;\r\n  margin-bottom: 20px;\r\n}\r\n.admin-container {\r\n  display: flex;\r\n  margin-top: 20px;\r\n  justify-content: space-around;\r\n  flex-wrap: wrap;\r\n}\r\n.userFace-img {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 30px;\r\n}\r\n.img-content {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.userInfo {\r\n  font-size: 12px;\r\n  color: skyblue;\r\n}\r\n</style>"],"sourceRoot":"src/views/sys"}]}